<section class="ahorcado">
  <article class="card">
    <h2>Ahorcado</h2>

    <!-- STATS -->
    <div class="stats">
      <span
        >Puntaje: <b>{{ score }}</b></span
      >
      <span
        >Vidas: <b>{{ erroresMaximos - error }}</b
        >/{{ erroresMaximos }}</span
      >
    </div>

    <!-- Dibujo + palabra -->
    <div class="hang-wrap">
      <svg class="hang" viewBox="0 0 200 220" role="img" aria-label="Ahorcado">
        <!-- Estructura fija -->
        <line x1="10" y1="210" x2="190" y2="210" class="gallows" />
        <line x1="40" y1="210" x2="40" y2="20" class="gallows" />
        <line x1="40" y1="20" x2="130" y2="20" class="gallows" />
        <line x1="130" y1="20" x2="130" y2="45" class="gallows" />
        <!-- Partes del cuerpo por errores -->
        <circle *ngIf="error >= 1" cx="130" cy="62" r="17" class="man" />
        <line *ngIf="error >= 2" x1="130" y1="79" x2="130" y2="125" class="man" />
        <line *ngIf="error >= 3" x1="130" y1="90" x2="110" y2="110" class="man" />
        <line *ngIf="error >= 4" x1="130" y1="90" x2="150" y2="110" class="man" />
        <line *ngIf="error >= 5" x1="130" y1="125" x2="112" y2="155" class="man" />
        <line *ngIf="error >= 6" x1="130" y1="125" x2="148" y2="155" class="man" />
      </svg>

      <div class="status">
        <p class="word">{{ palabraSecreta }}</p>
        <p>Errores: {{ error }}/{{ erroresMaximos }}</p>
      </div>
    </div>

    <div class="kb" *ngIf="!final">
      <button *ngFor="let l of letters" (click)="guess(l)" [disabled]="picked.has(l)">
        <strong> {{ l }}</strong>
      </button>
    </div>

    <!-- Palabra acertada (sumaste +1) -->
    <div class="result result--ok" *ngIf="final && ganar">
      <h3>Â¡Palabra acertada!</h3>
      <p>Sumaste <b>+1</b> punto.</p>
      <div class="actions">
        <button class="btn btn-pri" (click)="siguientePalabra()">Siguiente palabra</button>
        <button class="btn btn-ghost" (click)="reset()">Reiniciar</button>
      </div>
    </div>

    <!-- Game Over (rojo) -->
    <div class="overlay" *ngIf="gameOver">
      <div class="dialog">
        <h3>Game Over</h3>
        <p>Tu puntaje: {{ score }}</p>
        <div class="row">
          <button class="btn-over" routerLink="/home">Volver al Home</button>
          <button class="btn-over btn--primary-over" (click)="reset()">Reiniciar</button>
        </div>
      </div>
    </div>
  </article>
</section>
