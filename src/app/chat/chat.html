<section class="chat-box">
  <header class="chat-head">
    <h3>ðŸ’¬ Sala de Chat</h3>
  </header>

  <!-- CAMBIO: obtengo el usuario actual para saber quÃ© mensajes son mÃ­os -->
  @if (auth.user$ | async; as u) {

  <section class="chat-body" [style.height.px]="height" #list>
    <!-- CAMBIO: cambio .msg por una fila .row que se alinea izq/der segÃºn sea mÃ­o -->
    @for (m of svc.msgs$ | async; track m.id) {
    <div class="row" [class.me]="msjPropio(m, u?.id)">
      <!-- CAMBIO: [class.me] -->
      <!-- CAMBIO: burbuja con color por usuario -->
      <div
        class="bubble"
        [style.background]="msjPropio(m, u?.id) ? '#16a34a' : colorFor(m.user_id)"
        [title]="m.created_at | date : 'short'"
      >
        <!-- CAMBIO: muestro autor solo si NO es mÃ­o -->

        <div class="author">{{ m.display_name || m.email || 'Usuario' }}</div>
        <div class="text">{{ m.text }}</div>
        <div class="time">
          {{ m.created_at | date : 'dd/MM/yyyy, HH:mm' : 'America/Argentina/Buenos_Aires' }}
        </div>
      </div>
    </div>
    }
  </section>

  <footer class="chat-input">
    <input #inp type="text" placeholder="EscribÃ­ un mensajeâ€¦" (keydown.enter)="envio(inp)" />
    <button class="btn" (click)="envio(inp)">Enviar</button>
  </footer>

  }
</section>
